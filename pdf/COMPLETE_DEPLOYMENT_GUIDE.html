<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG QA ì‹œìŠ¤í…œ ì™„ì „ ë°°í¬ ê°€ì´ë“œ</title>
    <style>
        @page {
            margin: 2cm;
            size: A4;
        }
        
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            page-break-before: always;
        }
        
        h1:first-child {
            page-break-before: auto;
        }
        
        h2 {
            color: #34495e;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        
        h4 {
            color: #7f8c8d;
            margin-top: 20px;
        }
        
        code {
            background: #f8f9fa;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            page-break-inside: avoid;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre-line;
            text-align: center;
            page-break-inside: avoid;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 5px 0;
        }
        
        .toc {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            page-break-inside: avoid;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc ul ul {
            padding-left: 20px;
        }
        
        .checklist {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .checklist ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .checklist li:before {
            content: "â˜ ";
            font-weight: bold;
            color: #28a745;
        }
        
        .step-number {
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .command-block {
            background: #2d3748;
            color: #e2e8f0;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 5px 5px 0;
        }
        
        @media print {
            body {
                font-size: 12pt;
            }
            
            h1 {
                font-size: 18pt;
            }
            
            h2 {
                font-size: 16pt;
            }
            
            h3 {
                font-size: 14pt;
            }
            
            pre {
                font-size: 10pt;
            }
            
            .architecture-diagram {
                font-size: 10pt;
            }
        }
    </style>
</head>
<body>
    <h1>RAG QA ì‹œìŠ¤í…œ ì™„ì „ ë°°í¬ ê°€ì´ë“œ</h1>
    
    <div class="toc">
        <h2>ğŸ“‹ ëª©ì°¨</h2>
        <ul>
            <li><a href="#ì‹œìŠ¤í…œ-ê°œìš”">1. ì‹œìŠ¤í…œ ê°œìš”</a></li>
            <li><a href="#langchain-í”„ë ˆì„ì›Œí¬-ì´í•´">2. LangChain í”„ë ˆì„ì›Œí¬ ì´í•´</a></li>
            <li><a href="#vector-db-ë°-ì²­í‚¹-ì „ëµ-í™•ì¸">3. Vector DB ë° ì²­í‚¹ ì „ëµ í™•ì¸</a></li>
            <li><a href="#ì„œë²„-ì—…ë¡œë“œ-ë°©ë²•">4. ì„œë²„ ì—…ë¡œë“œ ë°©ë²•</a></li>
            <li><a href="#linux-ì„œë²„-ë°°í¬">5. Linux ì„œë²„ ë°°í¬</a></li>
            <li><a href="#ì‹œìŠ¤í…œ-êµ¬ì„±ë„">6. ì‹œìŠ¤í…œ êµ¬ì„±ë„</a></li>
            <li><a href="#ìš´ì˜-ë°-ê´€ë¦¬">7. ìš´ì˜ ë° ê´€ë¦¬</a></li>
            <li><a href="#ë°°í¬-ì²´í¬ë¦¬ìŠ¤íŠ¸">8. ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸</a></li>
        </ul>
    </div>

    <h2 id="ì‹œìŠ¤í…œ-ê°œìš”">1. ì‹œìŠ¤í…œ ê°œìš”</h2>
    
    <h3>ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜</h3>
    <div class="architecture-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ì‚¬ìš©ì       â”‚    â”‚   Nginx         â”‚    â”‚  Flask App      â”‚
â”‚   (ë¸Œë¼ìš°ì €)    â”‚â—„â”€â”€â–ºâ”‚ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ    â”‚â—„â”€â”€â–ºâ”‚   (5000)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                               â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                               â”‚  ì•¼ë†€ì ì•±   â”‚
                                               â”‚   (5001)   â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Vector DB     â”‚    â”‚     Redis       â”‚    â”‚   Ollama    â”‚
â”‚   (ChromaDB)    â”‚    â”‚    ìºì‹œ         â”‚    â”‚LLM ì„œë²„(11434)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </div>

    <h3>ğŸ¯ í•µì‹¬ êµ¬ì„±ìš”ì†Œ</h3>
    <ul>
        <li><strong>ì›¹ì„œë²„</strong>: Flask (ë©”ì¸ RAG ì‹œìŠ¤í…œ)</li>
        <li><strong>API ë¬¸ì„œ</strong>: Swagger/OpenAPI í†µí•©</li>
        <li><strong>LLM ì„œë²„</strong>: Ollama + ì•¼ë†€ì ëª¨ë¸</li>
        <li><strong>Vector DB</strong>: ChromaDB (ë¬¸ì„œ ì„ë² ë”© ì €ì¥)</li>
        <li><strong>ìºì‹œ</strong>: Redis (ì‘ë‹µ ìºì‹±)</li>
        <li><strong>í”„ë¡ì‹œ</strong>: Nginx (ë¡œë“œ ë°¸ëŸ°ì‹±, SSL)</li>
    </ul>

    <h2 id="langchain-í”„ë ˆì„ì›Œí¬-ì´í•´">2. LangChain í”„ë ˆì„ì›Œí¬ ì´í•´</h2>
    
    <h3>ğŸ”— LangChainì´ë€?</h3>
    <p>LangChainì€ <strong>LLM ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ìœ„í•œ ì¢…í•© í”„ë ˆì„ì›Œí¬</strong>ì…ë‹ˆë‹¤.</p>
    
    <h3>ğŸ“š ì£¼ìš” ê¸°ëŠ¥</h3>
    <ol>
        <li><strong>ë¬¸ì„œ ë¡œë”</strong>: PDF, DOCX, TXT ë“± ë‹¤ì–‘í•œ í˜•ì‹ ì§€ì›</li>
        <li><strong>í…ìŠ¤íŠ¸ ìŠ¤í”Œë¦¬í„°</strong>: ë¬¸ì„œë¥¼ ì ì ˆí•œ í¬ê¸°ë¡œ ì²­í‚¹</li>
        <li><strong>ì„ë² ë”©</strong>: í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°ë¡œ ë³€í™˜</li>
        <li><strong>ë²¡í„°ìŠ¤í† ì–´</strong>: ChromaDB, Pinecone ë“±ê³¼ ì—°ë™</li>
        <li><strong>ì²´ì¸</strong>: RAG íŒŒì´í”„ë¼ì¸ êµ¬ì„±</li>
        <li><strong>ë©”ëª¨ë¦¬</strong>: ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬</li>
    </ol>

    <h3>ğŸ”„ RAG ì‹œìŠ¤í…œì—ì„œì˜ ì—­í• </h3>
    <div class="architecture-diagram">
ë¬¸ì„œ â†’ LangChain â†’ ì²­í‚¹ â†’ ì„ë² ë”© â†’ Vector DB
                                      â†“
ì‚¬ìš©ì ì§ˆë¬¸ â†’ ì„ë² ë”© â†’ ìœ ì‚¬ë„ ê²€ìƒ‰ â†’ ì»¨í…ìŠ¤íŠ¸ â†’ LLM
    </div>

    <h3>ğŸ’» ì½”ë“œ ì˜ˆì‹œ</h3>
    <pre><code>from langchain.document_loaders import PyPDFLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.embeddings import HuggingFaceEmbeddings
from langchain.vectorstores import Chroma

# ë¬¸ì„œ ë¡œë“œ
loader = PyPDFLoader("document.pdf")
documents = loader.load()

# ì²­í‚¹ ì „ëµ
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=800,
    chunk_overlap=150
)
chunks = text_splitter.split_documents(documents)

# ì„ë² ë”© ë° ë²¡í„° ì €ì¥
embeddings = HuggingFaceEmbeddings()
vectorstore = Chroma.from_documents(chunks, embeddings)</code></pre>

    <h2 id="vector-db-ë°-ì²­í‚¹-ì „ëµ-í™•ì¸">3. Vector DB ë° ì²­í‚¹ ì „ëµ í™•ì¸</h2>
    
    <h3>ğŸ” Vector DB ìƒíƒœ í™•ì¸</h3>
    <div class="command-block">
        <code># Vector DB ë°ì´í„° í™•ì¸<br>python3 check_vectordb.py</code>
    </div>

    <div class="info">
        <h4>ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ:</h4>
        <pre><code>ğŸ” Vector DB ë°ì´í„° í™•ì¸ ì¤‘...
============================================================
ğŸ“ Vector DB ê²½ë¡œ: ./data/vectordb
ğŸ“Š ì»¬ë ‰ì…˜ ëª©ë¡:

1. ì»¬ë ‰ì…˜ëª…: custom_chunks
   - ë¬¸ì„œ ìˆ˜: 92ê°œ
   - ë©”íƒ€ë°ì´í„° í•„ë“œ: [source, chunk_index, chunking_strategy]

2. ì»¬ë ‰ì…˜ëª…: basic_chunks  
   - ë¬¸ì„œ ìˆ˜: 92ê°œ
   - ë©”íƒ€ë°ì´í„° í•„ë“œ: [source, chunk_index, file_type]

ğŸ“Š ë¬¸ì„œ ìˆ˜ í†µê³„:
   - ê¸°ë³¸ ì²­í‚¹: 92ê°œ
   - ì»¤ìŠ¤í…€ ì²­í‚¹: 92ê°œ
   - ì „ì²´: 184ê°œ

ğŸ’¾ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰:
   - Vector DB ì´ í¬ê¸°: 79.53 MB</code></pre>
    </div>

    <h3>âœ‚ï¸ ì²­í‚¹ ì „ëµ í…ŒìŠ¤íŠ¸</h3>
    <div class="command-block">
        <code># ì²­í‚¹ ì „ëµ í™•ì¸<br>python3 check_chunking.py</code>
    </div>

    <div class="info">
        <h4>ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ:</h4>
        <pre><code>âœ‚ï¸ Chunking ì „ëµ í™•ì¸
============================================================
ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ì²­í‚¹ ì „ëµ:
   1. basic - ê¸°ë³¸ ì²­í‚¹ (800ì/150ì¤‘ì²©)
   2. semantic - ì˜ë¯¸ ê¸°ë°˜ ì²­í‚¹  
   3. hybrid - í•˜ì´ë¸Œë¦¬ë“œ ì²­í‚¹
   4. custom_delimiter - ì»¤ìŠ¤í…€ êµ¬ë¶„ì (/$$/)

ğŸ”¹ CUSTOM_DELIMITER ì „ëµ í…ŒìŠ¤íŠ¸:
ğŸ“Š ì²­í‚¹ ê²°ê³¼:
   - ì²­í¬ ê°œìˆ˜: 3
   - í‰ê·  ì²­í¬ í¬ê¸°: 104.3ì

   ì²­í¬ #1: ì œ1ì¥ ì—°íšŒë¹„ ì•ˆë‚´...
   ì²­í¬ #2: ì œ2ì¥ ì—°íšŒë¹„ ë©´ì œ ì¡°ê±´...
   ì²­í¬ #3: ì œ3ì¥ íŠ¹ë³„ í˜œíƒ...</code></pre>
    </div>

    <h3>ğŸ“ˆ ì²­í‚¹ ì „ëµ ë¹„êµ</h3>
    <table>
        <tr>
            <th>ì „ëµ</th>
            <th>íŠ¹ì§•</th>
            <th>ì‚¬ìš© ì‹œê¸°</th>
        </tr>
        <tr>
            <td><strong>Basic</strong></td>
            <td>ê³ ì • í¬ê¸° ë¶„í• </td>
            <td>ì¼ë°˜ ë¬¸ì„œ</td>
        </tr>
        <tr>
            <td><strong>Semantic</strong></td>
            <td>ì˜ë¯¸ ë‹¨ìœ„ ë¶„í• </td>
            <td>êµ¬ì¡°í™”ëœ ë¬¸ì„œ</td>
        </tr>
        <tr>
            <td><strong>Hybrid</strong></td>
            <td>ê¸°ë³¸+ì˜ë¯¸ ê²°í•©</td>
            <td>ë³µí•© ë¬¸ì„œ</td>
        </tr>
        <tr>
            <td><strong>Custom Delimiter</strong></td>
            <td>êµ¬ë¶„ì ê¸°ë°˜</td>
            <td>íŠ¹ë³„ í¬ë§· ë¬¸ì„œ</td>
        </tr>
    </table>

    <h2 id="ì„œë²„-ì—…ë¡œë“œ-ë°©ë²•">4. ì„œë²„ ì—…ë¡œë“œ ë°©ë²•</h2>
    
    <h3>ğŸ“ ì—…ë¡œë“œí•  íŒŒì¼ ëª©ë¡</h3>
    <pre><code>rag-qa-system/
â”œâ”€â”€ app.py                    # ë©”ì¸ Flask ì•±
â”œâ”€â”€ yanolja_app.py           # ì•¼ë†€ì ì „ìš© ì•±  
â”œâ”€â”€ config.py                # ì„¤ì • íŒŒì¼
â”œâ”€â”€ yanolja_config.py        # ì•¼ë†€ì ì„¤ì •
â”œâ”€â”€ yanolja_llm_client.py    # LLM í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ requirements.txt         # Python ì˜ì¡´ì„±
â”œâ”€â”€ .env                     # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ models/                  # ëª¨ë¸ í´ë˜ìŠ¤ë“¤
â”‚   â”œâ”€â”€ embeddings.py
â”‚   â”œâ”€â”€ vectorstore.py
â”‚   â””â”€â”€ dual_llm.py
â”œâ”€â”€ routes/                  # API ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ chat.py
â”‚   â””â”€â”€ unified_benchmark.py
â”œâ”€â”€ services/                # ì„œë¹„ìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ chunking_strategies.py
â”‚   â”œâ”€â”€ document_processor.py
â”‚   â””â”€â”€ rag_chain.py  
â”œâ”€â”€ templates/               # HTML í…œí”Œë¦¿
â”‚   â”œâ”€â”€ main_rag_system.html
â”‚   â””â”€â”€ yanolja_main.html
â”œâ”€â”€ static/                  # ì •ì  íŒŒì¼
â”œâ”€â”€ data/                    # ë°ì´í„° íŒŒì¼
â”‚   â””â”€â”€ vectordb/           # Vector DB
â””â”€â”€ check_*.py              # í™•ì¸ ìŠ¤í¬ë¦½íŠ¸</code></pre>

    <h3>ğŸš€ ì—…ë¡œë“œ ë°©ë²•</h3>
    
    <h4><span class="step-number">1</span>SCPë¥¼ ì‚¬ìš©í•œ ì—…ë¡œë“œ</h4>
    <div class="command-block">
        <code># ì „ì²´ í”„ë¡œì íŠ¸ ì••ì¶•<br>
cd /mnt/d/99_DEOTIS_QA_SYSTEM/03_DEOTIS_QA/<br>
tar -czf rag-qa-system.tar.gz rag-qa-system/<br>
<br>
# ì„œë²„ë¡œ ì—…ë¡œë“œ<br>
scp rag-qa-system.tar.gz user@your-server.com:/tmp/<br>
<br>
# ì„œë²„ì—ì„œ ì••ì¶• í•´ì œ<br>
ssh user@your-server.com<br>
cd /tmp<br>
sudo tar -xzf rag-qa-system.tar.gz -C /opt/<br>
sudo chown -R $USER:$USER /opt/rag-qa-system</code>
    </div>

    <h4><span class="step-number">2</span>Rsyncë¥¼ ì‚¬ìš©í•œ ë™ê¸°í™”</h4>
    <div class="command-block">
        <code># íš¨ìœ¨ì ì¸ íŒŒì¼ ë™ê¸°í™”<br>
rsync -avz --progress \<br>
    --exclude='*.pyc' \<br>
    --exclude='__pycache__' \<br>
    --exclude='.git' \<br>
    /mnt/d/99_DEOTIS_QA_SYSTEM/03_DEOTIS_QA/rag-qa-system/ \<br>
    user@your-server.com:/opt/rag-qa-system/</code>
    </div>

    <h4><span class="step-number">3</span>Gitì„ ì‚¬ìš©í•œ ë°°í¬</h4>
    <div class="command-block">
        <code># ë¡œì»¬ì—ì„œ Git ì €ì¥ì†Œ ì´ˆê¸°í™”<br>
cd /mnt/d/99_DEOTIS_QA_SYSTEM/03_DEOTIS_QA/rag-qa-system<br>
git init<br>
git add .<br>
git commit -m "Initial commit"<br>
git remote add origin https://your-git-repository.git<br>
git push -u origin main<br>
<br>
# ì„œë²„ì—ì„œ í´ë¡ <br>
ssh user@your-server.com<br>
cd /opt<br>
git clone https://your-git-repository.git rag-qa-system</code>
    </div>

    <h2 id="linux-ì„œë²„-ë°°í¬">5. Linux ì„œë²„ ë°°í¬</h2>
    
    <h3>ğŸ–¥ï¸ ì„œë²„ ìš”êµ¬ì‚¬í•­</h3>
    
    <h4>ìµœì†Œ ì‚¬ì–‘</h4>
    <ul>
        <li><strong>OS</strong>: Ubuntu 22.04 LTS ì´ìƒ</li>
        <li><strong>CPU</strong>: 8 cores (Intel/AMD)</li>
        <li><strong>RAM</strong>: 16GB</li>
        <li><strong>Storage</strong>: 100GB SSD</li>
        <li><strong>GPU</strong>: RTX 3060 ì´ìƒ (LLM ì¶”ë¡ ìš©)</li>
    </ul>

    <h4>ê¶Œì¥ ì‚¬ì–‘</h4>
    <ul>
        <li><strong>CPU</strong>: 16 cores</li>
        <li><strong>RAM</strong>: 32GB</li>
        <li><strong>Storage</strong>: 500GB NVMe SSD</li>
        <li><strong>GPU</strong>: RTX 4070 ì´ìƒ</li>
    </ul>

    <h3>ğŸ”§ <span class="step-number">1</span>ì‹œìŠ¤í…œ ì´ˆê¸° ì„¤ì •</h3>
    <div class="command-block">
        <code># ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸<br>
sudo apt update && sudo apt upgrade -y<br>
<br>
# í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜<br>
sudo apt install -y \<br>
    python3.10 python3.10-venv python3-pip \<br>
    git nginx supervisor redis-server sqlite3 \<br>
    curl wget build-essential python3-dev \<br>
    software-properties-common apt-transport-https<br>
<br>
# NVIDIA ë“œë¼ì´ë²„ ì„¤ì¹˜ (GPU ì‚¬ìš© ì‹œ)<br>
sudo apt install nvidia-driver-530 nvidia-cuda-toolkit</code>
    </div>

    <h3>âš¡ <span class="step-number">2</span>Ollama ë° LLM ì„¤ì¹˜</h3>
    <div class="command-block">
        <code># Ollama ì„¤ì¹˜<br>
curl -fsSL https://ollama.ai/install.sh | sh<br>
<br>
# ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ ë“±ë¡<br>
sudo systemctl start ollama<br>
sudo systemctl enable ollama<br>
<br>
# ì•¼ë†€ì ëª¨ë¸ ë‹¤ìš´ë¡œë“œ<br>
ollama pull llama3.1:8b-instruct-q4_0<br>
ollama pull llama3.1:70b-instruct-q4_0<br>
ollama pull llama3.2:3b-instruct-q8_0<br>
<br>
# ëª¨ë¸ í™•ì¸<br>
ollama list</code>
    </div>

    <h3>ğŸ <span class="step-number">3</span>Python í™˜ê²½ ì„¤ì •</h3>
    <div class="command-block">
        <code># í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™<br>
cd /opt/rag-qa-system<br>
<br>
# ê°€ìƒí™˜ê²½ ìƒì„±<br>
python3.10 -m venv venv<br>
source venv/bin/activate<br>
<br>
# ì˜ì¡´ì„± ì„¤ì¹˜<br>
pip install --upgrade pip<br>
pip install -r requirements.txt<br>
<br>
# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •<br>
cp .env.example .env<br>
nano .env  # í™˜ê²½ ë³€ìˆ˜ ìˆ˜ì •</code>
    </div>

    <h3>ğŸ—ƒï¸ <span class="step-number">4</span>ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”</h3>
    <div class="command-block">
        <code># Vector DB ì´ˆê¸°í™”<br>
python3 load_documents.py<br>
<br>
# ìƒíƒœ í™•ì¸<br>
python3 check_vectordb.py<br>
python3 check_chunking.py<br>
<br>
# Redis ì„¤ì •<br>
sudo systemctl start redis-server<br>
sudo systemctl enable redis-server</code>
    </div>

    <h3>ğŸŒ <span class="step-number">5</span>ì›¹ì„œë²„ ì„¤ì •</h3>
    
    <h4>Systemd ì„œë¹„ìŠ¤ ë“±ë¡</h4>
    <div class="command-block">
        <code># ë©”ì¸ ì•± ì„œë¹„ìŠ¤<br>
sudo tee /etc/systemd/system/rag-qa-system.service << 'EOF'<br>
[Unit]<br>
Description=RAG QA System Flask Application<br>
After=network.target redis.service ollama.service<br>
<br>
[Service]<br>
Type=notify<br>
User=ubuntu<br>
Group=ubuntu<br>
WorkingDirectory=/opt/rag-qa-system<br>
Environment="PATH=/opt/rag-qa-system/venv/bin"<br>
ExecStart=/opt/rag-qa-system/venv/bin/gunicorn \<br>
    --config /opt/rag-qa-system/gunicorn_config.py \<br>
    app:app<br>
<br>
Restart=always<br>
RestartSec=10<br>
<br>
[Install]<br>
WantedBy=multi-user.target<br>
EOF</code>
    </div>

    <h3>ğŸ”„ <span class="step-number">6</span>Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •</h3>
    <div class="command-block">
        <code># Nginx ì„¤ì • íŒŒì¼<br>
sudo tee /etc/nginx/sites-available/rag-qa-system << 'EOF'<br>
upstream rag_qa_backend {<br>
    server 127.0.0.1:5000;<br>
}<br>
<br>
upstream yanolja_backend {<br>
    server 127.0.0.1:5001;<br>
}<br>
<br>
server {<br>
    listen 80;<br>
    server_name your-domain.com;<br>
    <br>
    client_max_body_size 100M;<br>
    <br>
    # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜<br>
    location / {<br>
        proxy_pass http://rag_qa_backend;<br>
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;<br>
        proxy_set_header Host $http_host;<br>
        proxy_redirect off;<br>
    }<br>
    <br>
    # Swagger API ë¬¸ì„œ<br>
    location /swagger {<br>
        proxy_pass http://rag_qa_backend/swagger;<br>
    }<br>
}<br>
EOF</code>
    </div>

    <h3>ğŸš€ <span class="step-number">7</span>ì„œë¹„ìŠ¤ ì‹œì‘</h3>
    <div class="command-block">
        <code># ì„œë¹„ìŠ¤ ì‹œì‘<br>
sudo systemctl start redis-server<br>
sudo systemctl start ollama<br>
sudo systemctl start rag-qa-system<br>
sudo systemctl start yanolja-app<br>
sudo systemctl start nginx<br>
<br>
# ë¶€íŒ… ì‹œ ìë™ ì‹œì‘<br>
sudo systemctl enable redis-server<br>
sudo systemctl enable ollama<br>
sudo systemctl enable rag-qa-system<br>
sudo systemctl enable yanolja-app<br>
sudo systemctl enable nginx</code>
    </div>

    <h2 id="ì‹œìŠ¤í…œ-êµ¬ì„±ë„">6. ì‹œìŠ¤í…œ êµ¬ì„±ë„</h2>
    
    <h3>ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h3>
    <div class="architecture-diagram">
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Load Balancer â”‚
                    â”‚   (Nginx:80,443)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Flask App     â”‚ â”‚ Yanolja App â”‚ â”‚   Static   â”‚
    â”‚   (5000)       â”‚ â”‚   (5001)    â”‚ â”‚   Files    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚     Service Layer     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚                 â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚Vector â”‚ â”‚   Ollama    â”‚ â”‚   Redis   â”‚
â”‚  DB   â”‚ â”‚LLM(11434)   â”‚ â”‚ Cache(6379)â”‚
â”‚(Chromaâ”‚ â”‚             â”‚ â”‚           â”‚
â”‚  DB)  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”˜
    </div>

    <h3>ğŸ“Š ë°ì´í„° í”Œë¡œìš°</h3>
    <div class="architecture-diagram">
1. ì‚¬ìš©ì ìš”ì²­ â†’ Nginx â†’ Flask App
                         â”‚
2. ì§ˆë¬¸ ë¶„ì„ â† â”€ â”€ â”€ â”€ â”€ â”€ â”˜
   â”‚
3. Vector DB ê²€ìƒ‰ â†’ ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰
   â”‚
4. ì»¨í…ìŠ¤íŠ¸ ìƒì„± â†’ Ollama LLM í˜¸ì¶œ
   â”‚
5. ì‘ë‹µ ìƒì„± â†’ ìºì‹±(Redis) â†’ ì‚¬ìš©ì
    </div>

    <h2 id="ìš´ì˜-ë°-ê´€ë¦¬">7. ìš´ì˜ ë° ê´€ë¦¬</h2>
    
    <h3>ğŸ“ˆ ëª¨ë‹ˆí„°ë§</h3>
    
    <h4>ë¡œê·¸ í™•ì¸</h4>
    <div class="command-block">
        <code># ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§<br>
sudo journalctl -u rag-qa-system -f<br>
sudo journalctl -u yanolja-app -f<br>
tail -f /var/log/rag-qa-system/error.log</code>
    </div>

    <h4>í—¬ìŠ¤ì²´í¬ ìŠ¤í¬ë¦½íŠ¸</h4>
    <pre><code>#!/bin/bash
# healthcheck.sh

check_service() {
    if systemctl is-active --quiet $1; then
        echo "âœ… $1 is running"
    else
        echo "âŒ $1 is not running"
        sudo systemctl start $1
    fi
}

echo "=== RAG QA System Health Check ==="
check_service "rag-qa-system"
check_service "yanolja-app" 
check_service "ollama"
check_service "redis-server"
check_service "nginx"

# API í—¬ìŠ¤ì²´í¬
curl -s http://localhost:5000/health
curl -s http://localhost:5001/health</code></pre>

    <h3>ğŸ’¾ ë°±ì—… ë° ë³µêµ¬</h3>
    
    <h4>ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸</h4>
    <pre><code>#!/bin/bash
# backup.sh

BACKUP_DIR="/backup/rag-qa-system"  
DATE=$(date +%Y%m%d_%H%M%S)
mkdir -p $BACKUP_DIR

# Vector DB ë°±ì—…
tar -czf $BACKUP_DIR/vectordb_$DATE.tar.gz /opt/rag-qa-system/data/vectordb

# ì„¤ì • íŒŒì¼ ë°±ì—…
tar -czf $BACKUP_DIR/config_$DATE.tar.gz /opt/rag-qa-system/.env

# 7ì¼ ì´ìƒ ëœ ë°±ì—… ì‚­ì œ
find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete

echo "ë°±ì—… ì™„ë£Œ: $DATE"</code></pre>

    <h3>ğŸš¨ ë¬¸ì œ í•´ê²°</h3>
    
    <h4>ì¼ë°˜ì ì¸ ë¬¸ì œë“¤</h4>
    
    <div class="warning">
        <h4>1. ì„œë¹„ìŠ¤ ì‹œì‘ ì‹¤íŒ¨</h4>
        <div class="command-block">
            <code># ë¡œê·¸ í™•ì¸<br>
sudo journalctl -xe -u rag-qa-system<br>
<br>
# í¬íŠ¸ ì¶©ëŒ í™•ì¸<br>
sudo netstat -tlnp | grep 5000<br>
<br>
# í”„ë¡œì„¸ìŠ¤ ê°•ì œ ì¢…ë£Œ<br>
sudo pkill -f gunicorn</code>
        </div>
    </div>

    <div class="warning">
        <h4>2. Vector DB ì ‘ê·¼ ì˜¤ë¥˜</h4>
        <div class="command-block">
            <code># ê¶Œí•œ í™•ì¸<br>
ls -la /opt/rag-qa-system/data/vectordb<br>
sudo chown -R ubuntu:ubuntu /opt/rag-qa-system<br>
<br>
# DB ì¬ì´ˆê¸°í™”<br>
rm -rf /opt/rag-qa-system/data/vectordb/*<br>
python3 load_documents.py</code>
        </div>
    </div>

    <h2 id="ë°°í¬-ì²´í¬ë¦¬ìŠ¤íŠ¸">8. ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
    
    <div class="checklist">
        <h3>ğŸ“‹ ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <ul>
            <li>ì„œë²„ ì‚¬ì–‘ í™•ì¸ (CPU, RAM, GPU)</li>
            <li>Ubuntu 22.04 ì„¤ì¹˜ ì™„ë£Œ</li>
            <li>í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜</li>
            <li>Python 3.10 í™˜ê²½ ì„¤ì •</li>
            <li>Git ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ ì¤€ë¹„</li>
        </ul>
    </div>

    <div class="checklist">
        <h3>ğŸ”§ ì„¤ì¹˜ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <ul>
            <li>Ollama ì„¤ì¹˜ ë° ëª¨ë¸ ë‹¤ìš´ë¡œë“œ</li>
            <li>Redis ì„œë²„ ì„¤ì¹˜</li>
            <li>Nginx ì„¤ì¹˜ ë° ì„¤ì •</li>
            <li>í”„ë¡œì íŠ¸ íŒŒì¼ ì—…ë¡œë“œ</li>
            <li>Python ê°€ìƒí™˜ê²½ ë° ì˜ì¡´ì„± ì„¤ì¹˜</li>
            <li>í™˜ê²½ë³€ìˆ˜ ì„¤ì • (.env)</li>
        </ul>
    </div>

    <div class="checklist">
        <h3>ğŸš€ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <ul>
            <li>Vector DB ì´ˆê¸°í™”</li>
            <li>Systemd ì„œë¹„ìŠ¤ ë“±ë¡</li>
            <li>ì„œë¹„ìŠ¤ ì‹œì‘ ë° í™œì„±í™”</li>
            <li>Nginx í”„ë¡ì‹œ ì„¤ì •</li>
            <li>SSL ì¸ì¦ì„œ ì„¤ì •</li>
            <li>ë°©í™”ë²½ ì„¤ì •</li>
        </ul>
    </div>

    <div class="checklist">
        <h3>âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <ul>
            <li>ì›¹ ì¸í„°í˜ì´ìŠ¤ ì ‘ì† í™•ì¸</li>
            <li>API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸</li>
            <li>Swagger ë¬¸ì„œ ì ‘ê·¼ í™•ì¸</li>
            <li>í—¬ìŠ¤ì²´í¬ ì‘ë‹µ í™•ì¸</li>
            <li>ë¡œê·¸ ìƒì„± í™•ì¸</li>
            <li>ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸</li>
        </ul>
    </div>

    <h3>ğŸ“ ì ‘ì† URL í™•ì¸</h3>
    <ul>
        <li><strong>ë©”ì¸ ì‹œìŠ¤í…œ</strong>: http://your-domain.com</li>
        <li><strong>ì•¼ë†€ì ì•±</strong>: http://your-domain.com/yanolja</li>
        <li><strong>API ë¬¸ì„œ</strong>: http://your-domain.com/swagger</li>
        <li><strong>í—¬ìŠ¤ì²´í¬</strong>: http://your-domain.com/health</li>
    </ul>

    <h2>9. ê²°ë¡ </h2>
    
    <div class="highlight">
        <h3>ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸</h3>
        <ol>
            <li><strong>LangChain</strong>: LLM ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ í”„ë ˆì„ì›Œí¬</li>
            <li><strong>Vector DB</strong>: ChromaDBë¡œ ì„ë² ë”© ë²¡í„° ì €ì¥</li>
            <li><strong>ì²­í‚¹ ì „ëµ</strong>: 4ê°€ì§€ ì „ëµìœ¼ë¡œ ë¬¸ì„œ ìµœì í™”</li>
            <li><strong>ë°°í¬ ë°©ë²•</strong>: SCP, Rsync, Git ì¤‘ ì„ íƒ</li>
            <li><strong>ì‹œìŠ¤í…œ êµ¬ì„±</strong>: ì›¹ì„œë²„ 1ê°œ + Swagger + LLM ì„œë²„</li>
        </ol>
    </div>

    <div class="info">
        <h3>ğŸ”„ ìš´ì˜ íŒ</h3>
        <ul>
            <li>ì •ê¸°ì ì¸ ë°±ì—… ìˆ˜í–‰</li>
            <li>ë¡œê·¸ ëª¨ë‹ˆí„°ë§</li>
            <li>ì„±ëŠ¥ ì§€í‘œ ì¶”ì </li>
            <li>ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì ìš©</li>
        </ul>
    </div>

    <p>ì„±ê³µì ì¸ ë°°í¬ë¥¼ ìœ„í•´ ë‹¨ê³„ë³„ë¡œ ì²œì²œíˆ ì§„í–‰í•˜ì‹œê³ , ë¬¸ì œ ë°œìƒ ì‹œ ë¡œê·¸ë¥¼ ë¨¼ì € í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤!</p>
</body>
</html>